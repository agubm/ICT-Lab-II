function d=map2symbols(c,constellation_order,switch_graph)

if constellation_order==2
    decision_points=[ -1.0000 - 1.0000i;-1.0000 + 1.0000i;1.0000 - 1.0000i; 1.0000 + 1.0000i];
elseif constellation_order==4
    decision_points=[ -0.9487 + 0.9487i; -0.9487 + 0.3162i; -0.9487 - 0.9487i; -0.9487 - 0.3162i;  -0.3162 + 0.9487i;  -0.3162 + 0.3162i;  -0.3162 - 0.9487i;  -0.3162 - 0.3162i;   0.9487 + 0.9487i;   0.9487 + 0.3162i;   0.9487 - 0.9487i;   0.9487 - 0.3162i;   0.3162 + 0.9487i;   0.3162 + 0.3162i;   0.3162 - 0.9487i; 0.3162 - 0.3162i];
elseif  constellation_order==6
    decision_points=[ -7.0000 - 7.0000i; -7.0000 - 5.0000i;  -7.0000 - 1.0000i;  -7.0000 - 3.0000i; -7.0000 + 7.0000i;  -7.0000 + 5.0000i;  -7.0000 + 1.0000i;  -7.0000 + 3.0000i;  -5.0000 - 7.0000i;  -5.0000 - 5.0000i;  -5.0000 - 1.0000i;  -5.0000 - 3.0000i;  -5.0000 + 7.0000i;  -5.0000 + 5.0000i;  -5.0000 + 1.0000i;  -5.0000 + 3.0000i;  -1.0000 - 7.0000i;  -1.0000 - 5.0000i;  -1.0000 - 1.0000i;  -1.0000 - 3.0000i;  -1.0000 + 7.0000i;  -1.0000 + 5.0000i;  -1.0000 + 1.0000i;  -1.0000 + 3.0000i;  -3.0000 - 7.0000i;  -3.0000 - 5.0000i;  -3.0000 - 1.0000i;  -3.0000 - 3.0000i;  -3.0000 + 7.0000i;  -3.0000 + 5.0000i;  -3.0000 + 1.0000i;  -3.0000 + 3.0000i;   7.0000 - 7.0000i;   7.0000 - 5.0000i;   7.0000 - 1.0000i;   7.0000 - 3.0000i;   7.0000 + 7.0000i;   7.0000 + 5.0000i;   7.0000 + 1.0000i;   7.0000 + 3.0000i;   5.0000 - 7.0000i;   5.0000 - 5.0000i;   5.0000 - 1.0000i;   5.0000 - 3.0000i;   5.0000 + 7.0000i;   5.0000 + 5.0000i;   5.0000 + 1.0000i;   5.0000 + 3.0000i;   1.0000 - 7.0000i;   1.0000 - 5.0000i;   1.0000 - 1.0000i;   1.0000 - 3.0000i;   1.0000 + 7.0000i;   1.0000 + 5.0000i;   1.0000 + 1.0000i;   1.0000 + 3.0000i;   3.0000 - 7.0000i;   3.0000 - 5.0000i;   3.0000 - 1.0000i;   3.0000 - 3.0000i;   3.0000 + 7.0000i;   3.0000 + 5.0000i;   3.0000 + 1.0000i;   3.0000 + 3.0000i];
end

d_scale=[];
nf = modnorm(decision_points,'avpow',1);
c_mod=vec2mat(c,constellation_order);
d_temp=bi2de(c_mod,'left-msb');

for i=1:length(d_temp)
    d_scale(i)=decision_points(d_temp(i)+1);
end
d_scale=d_scale';
d=d_scale*nf;


if(switch_graph == 1)
    scatterplot(d,1,0,'bo');
    title('Modulation Output');
    grid on
    axis([-1.5 1.5 -1.5 1.5]);
end



